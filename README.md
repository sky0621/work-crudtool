# SQLファイル単位のテーブルCRUD一覧自動生成ツール

## ■修正履歴
###### 2016/07/14 公開
###### 2016/07/15 バグfix（解析不能SQLにはERRORと表記してTSVに加えるよう修正）
　　　　　　→　指定ディレクトリ配下の全SQLファイルをパース可能になった。
###### 2016/07/19 GUI対応版アップ

## ■紹介
###### CRUD図がないと、機能とテーブル（データ）との関係が（ソース追わないと）わからない。でも、CRUD図のメンテは、つらい。
###### ということで、自動生成できないかと思って作りました。
###### とりあえず第１弾としては、SQLファイルが置かれている指定のディレクトリ配下のSQLファイルを解析（※偉そうに解析と言ってますが、解析自体は別の人が作ったモジュール）して、テーブル名の一覧にCRUD付けているだけです。
###### ＜今後＞
###### 当初やりたかったのは、Action → Service → SQL → テーブル名一覧のCRUD という感じで、機能ごとにどのテーブル使ってるのかが知りたかったので、そこまでいけるようにしたい（並行して、ソースの構文木を解析して呼び出し関係やらまとめるツールも開発中）。
###### あと、SQLファイルのパースができるということは、そのSQLに対するテストコードも（今のSQLが正とするなら）自動生成できるので、そういうツールも作ろうと思ってます。

## ■使い方
###### ZIP回答して、bat ファイルをコマンドプロンプトで実行してください。
_※なにしろ趣味で作ったのでデバッグ甘いです。_

_※２ウェイSQLファイルをパースしており、SQLとして成立しないものは当然落ちます。（begin使ってる系があやしい。）_

###### 【CUI版】
###### 　out/crudtool.zip
###### 　<引数>
###### 　　第１引数（★必須★）：解析したいSQLファイルが置かれたディレクトリのフルパスです。
###### 　　第２引数（任意）：TSVファイル出力先を変えたい場合にフルパスを指定。
###### 　　たとえばコマンドプロンプトで、下記のようにすると、bat ファイルと同じ場所に「crud.tsv」というTSVファイルを出力します。
###### 　　>crudtool.bat D:\Projects\workspace\HPGS-hp-csp-webapp\src\main\resources\sql
###### 【GUI版】
###### 　out/crudtoolgui.zip
_※コマンドプロンプト版と違い、起動時の引数は不要（GUIで指定するので）。_

_パース完了したかどうかが画面に表現されないので注意。指定ディレクトリ内にTSVができあがっていれば完了。_
